<select id="cameraSelect"></select>
<video id="webcam" autoplay playsinline width="300"></video>

<script>
async function initCameraList() {
  const devices = await navigator.mediaDevices.enumerateDevices();
  const videoDevices = devices.filter(d => d.kind === "videoinput");
  const select = document.getElementById("cameraSelect");

  videoDevices.forEach((device, i) => {
    const option = document.createElement("option");
    option.value = device.deviceId;
    option.text = device.label || `カメラ ${i+1}`;
    select.appendChild(option);
  });

  select.onchange = () => startCamera(select.value);
}

async function startCamera(deviceId) {
  const stream = await navigator.mediaDevices.getUserMedia({
    video: { deviceId: { exact: deviceId } }
  });
  document.getElementById("webcam").srcObject = stream;
}

initCameraList();
</script>
